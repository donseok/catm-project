<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CATM Dashboard - COBOL Analysis Monitor</title>
    <link rel="stylesheet" href="dashboard/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <h1>🔍 CATM Dashboard</h1>
            <span class="subtitle">COBOL Analysis Task Manager</span>
        </div>
        <div class="header-right">
            <span class="scan-date" id="scanDate">-</span>
            <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                <span class="icon-sun">☀️</span>
                <span class="icon-moon">🌙</span>
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Summary Cards -->
        <section class="summary-cards">
            <div class="card summary-card">
                <div class="card-icon">📊</div>
                <div class="card-content">
                    <span class="card-value" id="totalPrograms">-</span>
                    <span class="card-label">총 프로그램</span>
                </div>
            </div>
            <div class="card summary-card">
                <div class="card-icon">📝</div>
                <div class="card-content">
                    <span class="card-value" id="totalLines">-</span>
                    <span class="card-label">총 라인 수</span>
                </div>
            </div>
            <div class="card summary-card">
                <div class="card-icon">⚡</div>
                <div class="card-content">
                    <span class="card-value" id="avgComplexity">-</span>
                    <span class="card-label">평균 복잡도</span>
                </div>
            </div>
            <div class="card summary-card">
                <div class="card-icon">🗄️</div>
                <div class="card-content">
                    <span class="card-value" id="db2Programs">-</span>
                    <span class="card-label">DB2 프로그램</span>
                </div>
            </div>
        </section>

        <!-- Charts Section -->
        <section class="charts-section">
            <div class="card chart-card">
                <h2 class="card-title">📈 우선순위 점수</h2>
                <div class="chart-container">
                    <canvas id="priorityChart"></canvas>
                </div>
            </div>
            <div class="card chart-card">
                <h2 class="card-title">🎯 기술 분포</h2>
                <div class="chart-container">
                    <canvas id="techChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Program Table -->
        <section class="table-section">
            <div class="card table-card">
                <div class="table-header">
                    <h2 class="card-title">📋 프로그램 목록</h2>
                    <div class="table-controls">
                        <input type="text" id="searchInput" placeholder="검색..." class="search-input">
                        <select id="sortSelect" class="sort-select">
                            <option value="name">이름순</option>
                            <option value="complexity">복잡도순</option>
                            <option value="lines">라인수순</option>
                            <option value="score">우선순위순</option>
                        </select>
                    </div>
                </div>
                <div class="table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>프로그램</th>
                                <th>라인 수</th>
                                <th>복잡도</th>
                                <th>CALL</th>
                                <th>COPY</th>
                                <th>DB2</th>
                                <th>CICS</th>
                                <th>우선순위</th>
                                <th>전환방식</th>
                            </tr>
                        </thead>
                        <tbody id="programTableBody">
                            <!-- Dynamic content -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Dependency Graph -->
        <section class="graph-section">
            <div class="card graph-card">
                <h2 class="card-title">🔗 의존성 그래프</h2>
                <div class="mermaid-container">
                    <pre class="mermaid" id="dependencyGraph">
                        graph TD
                            LOADING[Loading...]
                    </pre>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <p>© 2026 동국시스템즈. All Rights Reserved. | CATM - COBOL Analysis Task Manager</p>
    </footer>

    <script src="dashboard/app.js"></script>
</body>

</html>