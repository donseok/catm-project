<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CATM Dashboard - COBOL Analysis Monitor</title>

    <!-- Pretendard Font -->
    <link rel="stylesheet" as="style" crossorigin
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable-dynamic-subset.min.css" />

    <link rel="stylesheet" href="dashboard/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <h1>CATM Dashboard</h1>
            <span class="subtitle">COBOL Analysis Task Manager</span>
        </div>
        <div class="header-right">
            <span class="scan-date" id="scanDate">-</span>
            <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                <span class="icon-sun">&#9728;&#65039;</span>
                <span class="icon-moon">&#9790;&#65039;</span>
            </button>
        </div>
    </header>

    <!-- Tab Navigation -->
    <nav class="tab-nav">
        <button class="tab-btn active" data-tab="overview">
            <span class="tab-icon">&#128202;</span>Í∞úÏöî
        </button>
        <button class="tab-btn" data-tab="programs">
            <span class="tab-icon">&#128203;</span>ÌîÑÎ°úÍ∑∏Îû® ÏÉÅÏÑ∏
        </button>
        <button class="tab-btn" data-tab="datadict">
            <span class="tab-icon">&#128218;</span>Îç∞Ïù¥ÌÑ∞ ÏÇ¨Ï†Ñ
        </button>
        <button class="tab-btn" data-tab="modernization">
            <span class="tab-icon">&#128640;</span>Î™®ÎçîÎÇòÏù¥Ï†úÏù¥ÏÖò
        </button>
        <button class="tab-btn" data-tab="dependencies">
            <span class="tab-icon">&#128279;</span>ÏùòÏ°¥ÏÑ± Í∑∏ÎûòÌîÑ
        </button>
    </nav>

    <!-- Main Content -->
    <main class="main-content">

        <!-- ========== Tab 1: Overview ========== -->
        <div class="tab-panel active" id="tab-overview">

            <!-- Summary Cards (6Í∞ú: 3Ïó¥√ó2Ìñâ) -->
            <section class="summary-cards">
                <div class="card summary-card animate-in" data-accent="blue">
                    <div class="card-icon">&#128202;</div>
                    <div class="card-content">
                        <span class="card-value" id="totalPrograms">
                            <span class="skeleton skeleton-value"></span>
                        </span>
                        <span class="card-label">Ï¥ù ÌîÑÎ°úÍ∑∏Îû®</span>
                    </div>
                </div>
                <div class="card summary-card animate-in" data-accent="emerald">
                    <div class="card-icon">&#128221;</div>
                    <div class="card-content">
                        <span class="card-value" id="totalLines">
                            <span class="skeleton skeleton-value"></span>
                        </span>
                        <span class="card-label">Ï¥ù ÎùºÏù∏ Ïàò</span>
                    </div>
                </div>
                <div class="card summary-card animate-in" data-accent="purple">
                    <div class="card-icon">&#9889;</div>
                    <div class="card-content">
                        <span class="card-value" id="avgComplexity">
                            <span class="skeleton skeleton-value"></span>
                        </span>
                        <span class="card-label">ÌèâÍ∑† Î≥µÏû°ÎèÑ</span>
                    </div>
                </div>
                <div class="card summary-card animate-in" data-accent="amber">
                    <div class="card-icon">&#128451;&#65039;</div>
                    <div class="card-content">
                        <span class="card-value" id="db2Programs">
                            <span class="skeleton skeleton-value"></span>
                        </span>
                        <span class="card-label">DB2 ÌîÑÎ°úÍ∑∏Îû®</span>
                    </div>
                </div>
                <div class="card summary-card animate-in" data-accent="teal">
                    <div class="card-icon">&#128220;</div>
                    <div class="card-content">
                        <span class="card-value" id="copybookCount">
                            <span class="skeleton skeleton-value"></span>
                        </span>
                        <span class="card-label">COPYBOOK Ïàò</span>
                    </div>
                </div>
                <div class="card summary-card animate-in" data-accent="rose">
                    <div class="card-icon">&#128450;</div>
                    <div class="card-content">
                        <span class="card-value" id="vsamCount">
                            <span class="skeleton skeleton-value"></span>
                        </span>
                        <span class="card-label">VSAM ÌååÏùº Ïàò</span>
                    </div>
                </div>
            </section>

            <!-- Phase Classification -->
            <section class="phase-section">
                <h2 class="phase-section-title">Ï†ÑÌôò Îã®Í≥Ñ Î∂ÑÎ•ò</h2>
                <div class="phase-cards" id="phaseCards">
                    <div class="card phase-card animate-in">
                        <div class="phase-card-header">
                            <span class="phase-badge phase-1">Phase 1</span>
                            <span class="phase-timeline">Ï¶âÏãú Ï†ÑÌôò</span>
                        </div>
                        <div class="phase-stats" id="phase1Stats">
                            <div class="skeleton skeleton-value" style="width:100%;height:60px;"></div>
                        </div>
                    </div>
                    <div class="card phase-card animate-in">
                        <div class="phase-card-header">
                            <span class="phase-badge phase-2">Phase 2</span>
                            <span class="phase-timeline">3Í∞úÏõî Ïù¥ÎÇ¥</span>
                        </div>
                        <div class="phase-stats" id="phase2Stats">
                            <div class="skeleton skeleton-value" style="width:100%;height:60px;"></div>
                        </div>
                    </div>
                    <div class="card phase-card animate-in">
                        <div class="phase-card-header">
                            <span class="phase-badge phase-3">Phase 3</span>
                            <span class="phase-timeline">6Í∞úÏõî Ïù¥ÎÇ¥</span>
                        </div>
                        <div class="phase-stats" id="phase3Stats">
                            <div class="skeleton skeleton-value" style="width:100%;height:60px;"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Risk Summary -->
            <section class="risk-section" id="riskSection" style="display:none;">
                <h2 class="phase-section-title">Î¶¨Ïä§ÌÅ¨ ÏöîÏïΩ</h2>
                <div class="risk-cards" id="riskCards"></div>
            </section>

            <!-- Charts Section -->
            <section class="charts-section">
                <div class="card chart-card animate-in">
                    <h2 class="card-title">Ïö∞ÏÑ†ÏàúÏúÑ Ï†êÏàò</h2>
                    <div class="chart-container" id="priorityChartWrap">
                        <div class="skeleton skeleton-chart"></div>
                        <canvas id="priorityChart" style="display:none;"></canvas>
                    </div>
                </div>
                <div class="card chart-card animate-in">
                    <h2 class="card-title">Í∏∞Ïà† Î∂ÑÌè¨</h2>
                    <div class="chart-container" id="techChartWrap">
                        <div class="skeleton skeleton-chart"></div>
                        <canvas id="techChart" style="display:none;"></canvas>
                        <div class="doughnut-center-text" id="doughnutCenter" style="display:none;">
                            <div class="doughnut-center-value" id="doughnutTotal">-</div>
                            <div class="doughnut-center-label">Total</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Analysis Status -->
            <section class="analysis-status-section" id="analysisStatusSection" style="display:none;">
                <h2 class="phase-section-title">Î∂ÑÏÑù Ïã§Ìñâ ÏÉÅÌÉú</h2>
                <div class="card analysis-status" id="analysisStatus"></div>
            </section>
        </div>

        <!-- ========== Tab 2: Program Detail ========== -->
        <div class="tab-panel" id="tab-programs">
            <section class="table-section">
                <div class="card table-card">
                    <div class="table-header">
                        <h2 class="card-title">üìã ÌîÑÎ°úÍ∑∏Îû® ÏÉÅÏÑ∏</h2>
                        <div class="table-controls">
                            <input type="text" id="searchInput" placeholder="ÌîÑÎ°úÍ∑∏Îû® Í≤ÄÏÉâ..." class="search-input">
                            <button class="filter-toggle-btn" id="filterToggleBtn">üîç Í≥†Í∏â ÌïÑÌÑ∞</button>
                            <select id="sortSelect" class="sort-select">
                                <option value="name">Ïù¥Î¶ÑÏàú</option>
                                <option value="complexity">Î≥µÏû°ÎèÑÏàú</option>
                                <option value="lines">ÎùºÏù∏ÏàòÏàú</option>
                                <option value="score">Ïö∞ÏÑ†ÏàúÏúÑÏàú</option>
                            </select>
                        </div>
                    </div>

                    <!-- Advanced Filter Panel -->
                    <div class="filter-panel" id="filterPanel" style="display:none;">
                        <div class="filter-row">
                            <div class="filter-group">
                                <label>Î≥µÏû°ÎèÑ Î≤îÏúÑ</label>
                                <div class="range-inputs">
                                    <input type="number" id="complexityMin" value="0" min="0" class="range-input">
                                    <span>~</span>
                                    <input type="number" id="complexityMax" value="100" min="0" class="range-input">
                                </div>
                            </div>
                            <div class="filter-group">
                                <label>ÎùºÏù∏Ïàò Î≤îÏúÑ</label>
                                <div class="range-inputs">
                                    <input type="number" id="linesMin" value="0" min="0" class="range-input">
                                    <span>~</span>
                                    <input type="number" id="linesMax" value="10000" min="0" class="range-input">
                                </div>
                            </div>
                            <div class="filter-group">
                                <label>Í∏∞Ïà† Ïä§ÌÉù</label>
                                <div class="checkbox-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="filterDB2" checked> DB2
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="filterCICS" checked> CICS
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="filterVSAM" checked> VSAM
                                    </label>
                                </div>
                            </div>
                            <div class="filter-group">
                                <label>Phase</label>
                                <div class="checkbox-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="filterPhase1" checked> Phase 1
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="filterPhase2" checked> Phase 2
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="filterPhase3" checked> Phase 3
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="filter-actions">
                            <button class="filter-apply-btn" id="applyFilterBtn">ÌïÑÌÑ∞ Ï†ÅÏö©</button>
                            <button class="filter-reset-btn" id="resetFilterBtn">Ï¥àÍ∏∞Ìôî</button>
                        </div>
                    </div>

                    <div class="table-wrapper">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ÌîÑÎ°úÍ∑∏Îû®</th>
                                    <th>ÎùºÏù∏ Ïàò</th>
                                    <th>Î≥µÏû°ÎèÑ</th>
                                    <th>CALL</th>
                                    <th>COPY</th>
                                    <th>DB2</th>
                                    <th>CICS</th>
                                    <th>Ïö∞ÏÑ†ÏàúÏúÑ</th>
                                    <th>Ï†ÑÌôòÎ∞©Ïãù</th>
                                    <th>ÏÉÅÏÑ∏</th>
                                </tr>
                            </thead>
                            <tbody id="programTableBody">
                                <!-- Table rows loaded by JS -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Pagination -->
                    <div class="pagination" id="pagination">
                        <div class="pagination-info">
                            <span id="paginationInfo">0Í∞ú Ï§ë 0-0</span>
                        </div>
                        <div class="pagination-controls">
                            <select id="pageSizeSelect" class="page-size-select">
                                <option value="10">10Í∞úÏî©</option>
                                <option value="25">25Í∞úÏî©</option>
                                <option value="50" selected>50Í∞úÏî©</option>
                                <option value="100">100Í∞úÏî©</option>
                            </select>
                            <button class="page-btn" id="prevPageBtn" disabled>‚óÄ Ïù¥Ï†Ñ</button>
                            <span class="page-number" id="pageNumber">1 / 1</span>
                            <button class="page-btn" id="nextPageBtn" disabled>Îã§Ïùå ‚ñ∂</button>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Program Detail Panel (Slide-in) -->
        <div class="detail-panel" id="detailPanel">
            <div class="detail-panel-header">
                <h2 id="detailProgramName">ÌîÑÎ°úÍ∑∏Îû® ÏÉÅÏÑ∏</h2>
                <button class="detail-close-btn" id="detailCloseBtn">‚úï</button>
            </div>
            <div class="detail-panel-content" id="detailPanelContent">
                <!-- Content loaded by JS -->
            </div>
        </div>
        <div class="detail-overlay" id="detailOverlay"></div>

        <!-- ========== Tab 3: Data Dictionary ========== -->
        <div class="tab-panel" id="tab-datadict">
            <section class="datadict-section">
                <h2 class="phase-section-title">COPYBOOK Îç∞Ïù¥ÌÑ∞ ÏÇ¨Ï†Ñ</h2>
                <div class="copybook-cards" id="copybookCards">
                    <div class="skeleton skeleton-chart" style="height:120px;"></div>
                </div>

                <div class="copybook-detail" id="copybookDetail" style="display:none;">
                    <div class="card">
                        <h3 class="card-title" id="copybookDetailTitle">-</h3>
                        <div class="markdown-body" id="copybookDetailBody"></div>
                    </div>
                </div>

                <div class="erd-section" id="erdSection" style="display:none;">
                    <h2 class="phase-section-title">ERD - COPYBOOK Í¥ÄÍ≥ÑÎèÑ</h2>
                    <div class="card graph-card">
                        <div class="mermaid-container">
                            <pre class="mermaid" id="erdGraph">graph TD
    LOADING[Loading...]</pre>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- ========== Tab 4: Modernization ========== -->
        <div class="tab-panel" id="tab-modernization">
            <section class="modernization-section">
                <!-- Timeline Roadmap -->
                <h2 class="phase-section-title">Î™®ÎçîÎÇòÏù¥Ï†úÏù¥ÏÖò Î°úÎìúÎßµ</h2>
                <div class="card timeline-card">
                    <div class="timeline" id="modernTimeline"></div>
                </div>

                <!-- Conversion Strategy Table -->
                <h2 class="phase-section-title" style="margin-top:1.5rem;">Ï†ÑÌôò Ï†ÑÎûµ</h2>
                <div class="card table-card">
                    <div class="table-wrapper">
                        <table class="data-table" id="strategyTable">
                            <thead>
                                <tr>
                                    <th>ÌîÑÎ°úÍ∑∏Îû®</th>
                                    <th>Ï†ÑÌôòÎ∞©Ïãù</th>
                                    <th>Phase</th>
                                    <th>ÏµúÏ¢Ö Ï†êÏàò</th>
                                    <th>Ï£ºÏöî ÎßàÏùºÏä§ÌÜ§</th>
                                    <th>Ï£ºÏùòÏÇ¨Ìï≠</th>
                                </tr>
                            </thead>
                            <tbody id="strategyTableBody"></tbody>
                        </table>
                    </div>
                </div>

                <!-- Risk Matrix -->
                <h2 class="phase-section-title" style="margin-top:1.5rem;">Î¶¨Ïä§ÌÅ¨ Îß§Ìä∏Î¶≠Ïä§</h2>
                <div class="risk-matrix-cards" id="riskMatrixCards"></div>

                <!-- Radar Chart for Weights -->
                <h2 class="phase-section-title" style="margin-top:1.5rem;">Í∞ÄÏ§ëÏπò Í∏∞Ï§Ä</h2>
                <div class="card chart-card">
                    <div class="radar-chart-container">
                        <canvas id="radarChart"></canvas>
                    </div>
                </div>
            </section>
        </div>

        <!-- ========== Tab 5: Dependency Graph ========== -->
        <div class="tab-panel" id="tab-dependencies">
            <section class="graph-section">
                <div class="card graph-card">
                    <div class="graph-header">
                        <h2 class="card-title">ÏùòÏ°¥ÏÑ± Í∑∏ÎûòÌîÑ</h2>
                        <div class="graph-controls">
                            <button class="graph-btn active" id="graphCallView">Call Graph</button>
                            <button class="graph-btn" id="graphDataFlowView">Data Flow</button>
                            <span class="graph-controls-divider"></span>
                            <button class="graph-btn" id="graphZoomIn">+ ÌôïÎåÄ</button>
                            <button class="graph-btn" id="graphZoomOut">- Ï∂ïÏÜå</button>
                            <button class="graph-btn" id="graphFullscreen">Ï†ÑÏ≤¥ÌôîÎ©¥</button>
                        </div>
                    </div>
                    <div class="mermaid-container" id="mermaidContainer">
                        <button class="fullscreen-close" id="fullscreenClose">Îã´Í∏∞</button>
                        <pre class="mermaid" id="dependencyGraph">
                            graph TD
                                LOADING[Loading...]
                        </pre>
                    </div>
                    <div class="graph-legend">
                        <div class="legend-item">
                            <span class="legend-color program"></span>
                            <span>Î©îÏù∏ ÌîÑÎ°úÍ∑∏Îû®</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color subprogram"></span>
                            <span>ÏÑúÎ∏åÌîÑÎ°úÍ∑∏Îû® (CALL)</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color copybook"></span>
                            <span>COPYBOOK (COPY)</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color db2"></span>
                            <span>DB2 ÌÖåÏù¥Î∏î</span>
                        </div>
                        <div class="legend-item" id="legendFile" style="display:none;">
                            <span class="legend-color file"></span>
                            <span>ÌååÏùº (I/O)</span>
                        </div>
                    </div>
                </div>
            </section>
        </div>

    </main>

    <!-- Footer -->
    <footer class="footer">
        <p>&copy; 2026 ÎèôÍµ≠ÏãúÏä§ÌÖúÏ¶à. All Rights Reserved. | CATM - COBOL Analysis Task Manager</p>
    </footer>

    <script src="dashboard/app.js"></script>
</body>

</html>