# COBOL 데이터 구조 분석 프롬프트

당신은 IBM 메인프레임 데이터 아키텍트입니다.
아래 COPYBOOK/DCLGEN의 데이터 구조를 분석하여
MES 시스템 설계에 필요한 데이터 모델링 기초 자료를 생성하세요.

## 분석 대상 COPYBOOK
```cobol
{{COPYBOOK_SOURCE}}
```

## 관련 DB2 DDL (있을 경우)
```sql
{{DDL_SOURCE}}
```

## 사용 현황
이 COPYBOOK을 참조하는 프로그램 목록입니다. 데이터의 업무 중요도 판단에 활용하세요.

{{USAGE_CONTEXT}}

---

## 분석 지침

1. **88-level 조건명**: 비즈니스 규칙을 정의하는 핵심 요소입니다. 조건명-값 매핑을 "5. 비즈니스 규칙" 섹션에 모두 나열하세요.
2. **REDEFINES**: 동일 메모리를 다르게 해석하므로, 원본 필드와 재정의 필드의 관계를 명확히 기술하세요.
3. **OCCURS DEPENDING ON**: 가변 길이 배열은 MES 변환 시 별도 테이블로 정규화가 필요합니다.
4. **COMP-3/BINARY 필드**: 데이터 마이그레이션 시 변환이 필요한 필드를 명시하세요.
5. **엔티티 관계**: 이 COPYBOOK의 키 필드를 식별하고, 다른 COPYBOOK과의 관계(FK 후보)를 제안하세요.

## 출력 형식 (마크다운)

# 데이터 구조 분석: {{COPYBOOK_NAME}}

## 1. 구조 개요
- 용도: (이 데이터 구조가 어떤 업무에 사용되는지)
- 타입: [마스터/트랜잭션/작업용/인터페이스]
- 관련 업무: (생산/품질/재고/공정 등)
- 참조 프로그램 수: (사용 현황에서 확인)

## 2. 필드 분석

| 필드명 | PIC | USAGE | 한글 설명 | 업무 의미 | MES 매핑 후보 |
|--------|-----|-------|----------|----------|--------------|
(각 필드를 한국어로 설명. COMP-3 등 USAGE가 있으면 반드시 표기)

## 3. 비즈니스 규칙 (88-level 조건명)

| 조건명 | 상위 필드 | 값 | 업무 의미 |
|--------|----------|-----|----------|
(88-level 조건명을 모두 나열. 없으면 "해당 없음")

## 4. 엔티티 관계 분석
- 키 필드 (PK 후보): (식별자 역할의 필드)
- 외래 키 후보 (FK): (다른 COPYBOOK/테이블과의 관계)
- 정규화 제안: (반복 그룹, OCCURS → 별도 테이블 분리 필요 여부)

## 5. MES 데이터 모델 매핑 제안
- 현재 COBOL 구조 → MES 테이블 설계 제안
- 데이터 타입 변환 가이드 (COBOL PIC → SQL/Java 타입)

## 6. 데이터 품질 이슈

각 이슈에 심각도를 태그하세요: [HIGH], [MEDIUM], [LOW]

- [심각도] REDEFINES로 인한 데이터 해석 주의사항
- [심각도] 날짜 형식 (YYMMDD vs YYYYMMDD 등)
- [심각도] 코드 값 의미 (하드코딩된 값)
- [심각도] COMP-3/BINARY 변환 필요 필드
