# 모더나이제이션 우선순위 - Claude 평가

## 비즈니스 중요도 재산정

| 프로그램 | 기존 점수 | 재산정 | 근거 |
|---------|----------|--------|------|
| PGM001 | 5 | **8** | 전일 생산라인별 실적 집계 및 일일 생산보고서 생성 프로그램. MES의 핵심 기능인 **생산실적 관리(Production Performance Management)**에 직접 해당. 생산수량 집계, 오류건수 추적, DB2 테이블 갱신 등 MES 운영 데이터의 근간이 되는 프로그램. |
| PGM002 | 5 | **7** | 입출고 트랜잭션 처리 및 재고 마스터 갱신, 수불대장 생성 프로그램. MES 주요 기능인 **자재/재고관리(Inventory Management)**에 해당. 재고수불은 MES-ERP 연계의 핵심 데이터이며, 실시간 재고 파악은 생산계획 수립의 전제조건. |

> **참고**: `.GITKEEP`은 디렉토리 구조 유지용 빈 파일이므로 분석 대상에서 제외합니다.

---

## Phase 배정

### Phase 1 (즉시 전환, 0-3개월)

- **PGM001 (생산실적 집계)**
  - MES 핵심 기능(생산실적)에 직결되며, 기술 복잡도가 상대적으로 낮음 (complexity: 12, 116 lines)
  - CICS 미사용, DB2 UPDATE 1개 테이블로 전환 범위가 명확
  - VSAM KSDS 순차 읽기 → RDBMS 조회로 패턴이 단순
  - 전환 용이도 7점으로 자동 변환 적합
  - MES 가동 시 생산실적 데이터가 가장 먼저 필요하므로 최우선 전환 대상

### Phase 2 (중기 전환, 3-6개월)

- **PGM002 (재고수불 처리)**
  - MES 주요 기능(재고관리)에 해당하나, 기술 복잡도가 높음 (complexity: 18, 167 lines, CALL 4개, COPY 3개)
  - VSAM 랜덤 I/O(재고 마스터 갱신)가 포함되어 트랜잭션 무결성 검증 필요
  - PGM001의 생산실적 데이터가 재고 입고의 기초가 되므로 선후행 관계 존재
  - 전환 시 재고 마스터의 동시성 제어(Concurrent Access) 설계가 필요

---

## 전환 순서 권장

```
PGM001 (생산실적 집계)
  │
  │  생산실적 → 완제품 입고 데이터 연계
  ▼
PGM002 (재고수불 처리)
```

### 상세 전환 전략

| 프로그램 | 전환 방식 | 전환 시 주의사항 |
|---------|----------|----------------|
| PGM001 | **자동 변환** | - VSAM KSDS → RDBMS 테이블 매핑 시 복합키(공장+라인+일자+순번) 인덱스 설계 필수<br>- CPYTRANS 구조체 → DTO/Entity 클래스로 1:1 매핑 가능<br>- DB2 UPDATE 로직은 SQL 그대로 이관 가능<br>- 배치 스케줄러(JCL → Spring Batch 등) 전환 병행 |
| PGM002 | **하이브리드** (자동 변환 + 부분 리라이트) | - VSAM 랜덤 I/O(재고 마스터 READ/REWRITE)는 JPA/트랜잭션 관리로 리라이트 권장<br>- 재고 증감 로직의 동시성 제어(Optimistic/Pessimistic Lock) 설계 필요<br>- 수불대장 순차 기록 → 이벤트 소싱 또는 변경이력 테이블로 현대화 검토<br>- 입출고 유형별 분기 로직(입고/출고/반품/조정)의 비즈니스 규칙 검증 필수 |

---

## 리스크 및 주의사항

### 데이터 마이그레이션 리스크
- **VSAM → RDBMS 전환**: 두 프로그램 모두 VSAM 파일을 사용하므로, 데이터 마이그레이션 계획이 전환과 병행되어야 함. 특히 재고 마스터(PGM002)는 운영 중 데이터 정합성 유지가 관건
- **DB2 테이블 호환성**: 기존 DB2 테이블(TB_DAILY_PROD, TB_INV_SUMMARY)의 스키마를 신규 RDBMS에 그대로 이관할지, 재설계할지 사전 결정 필요

### 통합 테스트 리스크
- PGM001 → PGM002 간 데이터 연계(생산완료 → 입고 트랜잭션)가 정상 작동하는지 **End-to-End 통합 테스트** 필수
- 기존 COBOL과 신규 시스템 간 **병행 운영(Parallel Run)** 기간을 최소 1개월 확보 권장

### 배치 스케줄링 리스크
- 두 프로그램 모두 일일 배치이므로, JCL/JES2 기반 스케줄링 → 현대적 Job Scheduler(Airflow, Spring Batch 등) 전환이 동반되어야 함
- 배치 실행 순서(PGM001 선행 → PGM002 후행)가 신규 스케줄러에서도 보장되어야 함

### COPYBOOK 전환 리스크
- COMP-3(Packed Decimal) 필드가 포함된 COPYBOOK은 Java/Python 전환 시 정밀도 검증 필요
- 88 레벨 조건명은 Enum 또는 상수 클래스로 매핑하되, 비즈니스 규칙 누락 방지를 위해 원본 대조 필수

### 전체 일정 요약

| Phase | 기간 | 대상 | 주요 마일스톤 |
|-------|------|------|-------------|
| Phase 1 | 0-3개월 | PGM001 | 생산실적 집계 전환 완료, 병행 운영 시작 |
| Phase 2 | 3-6개월 | PGM002 | 재고수불 전환 완료, E2E 통합 테스트 |
| 안정화 | 6-8개월 | 전체 | 병행 운영 종료, COBOL 시스템 퇴역 |